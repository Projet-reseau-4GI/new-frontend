{"openapi":"3.0.1","info":{"title":"API OCR Documents Camerounais","description":"API d'analyse OCR pour pièces d'identité camerounaises (Passeport, CNI, Permis)","contact":{"name":"Thomas Djotio Ndié","url":"https://github.com/yourrepo","email":"support@example.com"},"license":{"name":"MIT License","url":"https://opensource.org/licenses/MIT"},"version":"1.0.0"},"servers":[{"url":"https://new-backend-network.onrender.com","description":"Serveur principal"},{"url":"http://localhost:8080","description":"Développement local"}],"paths":{"/api/documents/upload-analyze":{"post":{"tags":["document-analysis-controller"],"operationId":"uploadAndAnalyze","requestBody":{"content":{"multipart/form-data":{"schema":{"required":["frontFile","userId"],"type":"object","properties":{"frontFile":{"type":"string","format":"binary"},"backFile":{"type":"string","format":"binary"},"pieceType":{"type":"string"},"userId":{"type":"string"}}}}}},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/DocumentAnalysisResponse"}}}}}}},"/api/documents/upload":{"post":{"tags":["document-controller"],"operationId":"uploadDocument","requestBody":{"content":{"multipart/form-data":{"schema":{"required":["file","pieceType","userId"],"type":"object","properties":{"file":{"type":"string","format":"binary"},"pieceType":{"type":"string"},"userId":{"type":"string"}}}}}},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/DocumentEntity"}}}}}}},"/api/auth/verify-code":{"post":{"tags":["password-reset-controller"],"operationId":"verifyCode","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/VerifyCodeRequest"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"object","additionalProperties":{"type":"object"}}}}}}}},"/api/auth/reset-password":{"post":{"tags":["password-reset-controller"],"operationId":"resetPassword","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResetPasswordRequest"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"object","additionalProperties":{"type":"string"}}}}}}}},"/api/auth/register":{"post":{"tags":["auth-controller"],"operationId":"register","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RegisterRequest"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"object","additionalProperties":{"type":"string"}}}}}}}},"/api/auth/login":{"post":{"tags":["auth-controller"],"operationId":"login","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/LoginRequest"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"object","additionalProperties":{"type":"string"}}}}}}}},"/api/auth/google/callback":{"post":{"tags":["google-auth-controller"],"operationId":"handleCallback","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/GoogleCallbackRequest"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/GoogleAuthResponse"}}}}}}},"/api/auth/forgot-password":{"post":{"tags":["password-reset-controller"],"operationId":"forgotPassword","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ForgotPasswordRequest"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"object","additionalProperties":{"type":"string"}}}}}}}},"/health":{"get":{"tags":["health-controller"],"operationId":"health","responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"object","additionalProperties":{"type":"string"}}}}}}}},"/api/users/find-id":{"get":{"tags":["user-controller"],"operationId":"getMemberIdByEmail","parameters":[{"name":"email","in":"query","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"object","additionalProperties":{"type":"string","format":"uuid"}}}}}}}},"/api/documents/{documentId}":{"get":{"tags":["document-controller"],"operationId":"getDocumentMetadata","parameters":[{"name":"documentId","in":"path","required":true,"schema":{"type":"string","format":"uuid"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/DocumentEntity"}}}}}}},"/api/documents/{documentId}/download":{"get":{"tags":["document-controller"],"operationId":"downloadDocument","parameters":[{"name":"documentId","in":"path","required":true,"schema":{"type":"string","format":"uuid"}},{"name":"side","in":"query","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"string","format":"byte"}}}}}}},"/api/documents/{documentId}/analyze":{"get":{"tags":["document-analysis-controller"],"operationId":"analyzeExisting","parameters":[{"name":"documentId","in":"path","required":true,"schema":{"type":"string","format":"uuid"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/DocumentAnalysisResponse"}}}}}}},"/api/debug/users":{"get":{"tags":["debug-controller"],"operationId":"listUsers","responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"array","items":{"type":"object","additionalProperties":{"type":"string"}}}}}}}}},"/api/debug/users-with-id":{"get":{"tags":["debug-controller"],"operationId":"listUsersWithId","responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"array","items":{"type":"object","additionalProperties":{"type":"string"}}}}}}}}},"/api/debug/test-user":{"get":{"tags":["debug-controller"],"operationId":"testUser","responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"object","additionalProperties":{"type":"object"}}}}}}}},"/api/auth/google/url":{"get":{"tags":["google-auth-controller"],"operationId":"getAuthUrl","responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/AuthUrlResponse"}}}}}}}},"components":{"schemas":{"DocumentAnalysisResponse":{"type":"object","properties":{"documentType":{"type":"string"},"documentNumber":{"type":"string"},"holderName":{"type":"string"},"dateOfBirth":{"type":"string","format":"date"},"issueDate":{"type":"string","format":"date"},"expirationDate":{"type":"string","format":"date"},"isValid":{"type":"boolean"},"validationMessage":{"type":"string"},"confidenceScore":{"type":"number","format":"double"},"hasUncertainty":{"type":"boolean"},"additionalFields":{"type":"object","additionalProperties":{"type":"string"}},"rawExtractedText":{"type":"string"}}},"DocumentEntity":{"type":"object","properties":{"id":{"type":"string","format":"uuid"},"pieceType":{"type":"string"},"fileName":{"type":"string"},"fileSize":{"type":"integer","format":"int64"},"minioPath":{"type":"string"},"backMinioPath":{"type":"string"},"userId":{"type":"string","format":"uuid"},"fileType":{"type":"string"},"uploadDate":{"type":"string","format":"date-time"},"status":{"type":"string"}}},"VerifyCodeRequest":{"required":["code","email"],"type":"object","properties":{"email":{"type":"string"},"code":{"pattern":"\\d{6}","type":"string"}}},"ResetPasswordRequest":{"required":["code","email","newPassword"],"type":"object","properties":{"email":{"type":"string"},"code":{"pattern":"\\d{6}","type":"string"},"newPassword":{"maxLength":2147483647,"minLength":8,"pattern":"^(?=.*[a-z])(?=.*[A-Z])(?=.*\\d)(?=.*[@$!%*?&])[A-Za-z\\d@$!%*?&]{8,}$","type":"string"}}},"RegisterRequest":{"required":["email","firstName","lastName","password"],"type":"object","properties":{"email":{"maxLength":255,"minLength":0,"type":"string"},"password":{"maxLength":128,"minLength":8,"pattern":"^(?=.*[a-z])(?=.*[A-Z])(?=.*\\d)(?=.*[@$!%*?&])[A-Za-z\\d@$!%*?&]{8,}$","type":"string"},"firstName":{"maxLength":100,"minLength":1,"type":"string"},"lastName":{"maxLength":100,"minLength":1,"type":"string"}}},"LoginRequest":{"required":["email","password"],"type":"object","properties":{"email":{"type":"string"},"password":{"type":"string"}}},"GoogleCallbackRequest":{"type":"object","properties":{"code":{"type":"string"}}},"GoogleAuthResponse":{"type":"object","properties":{"token":{"type":"string"},"email":{"type":"string"},"name":{"type":"string"},"newUser":{"type":"boolean"}}},"ForgotPasswordRequest":{"required":["email"],"type":"object","properties":{"email":{"type":"string"}}},"AuthUrlResponse":{"type":"object","properties":{"url":{"type":"string"}}}}}}